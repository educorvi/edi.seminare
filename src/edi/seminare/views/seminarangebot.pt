<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="edi.seminare"
      metal:use-macro="context/main_template/macros/master">
<body>
  <metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">
      <tal:variables tal:define="icons python:context.restrictedTraverse('@@iconresolver');">

        <div class="container">

          <div class="row">

            <div class="col-12 col-sm-9">

              <h1 tal:content="context/title"/>
              <span tal:content="structure provider:plone.belowcontenttitle" />
              <p tal:condition="context/description" class="lead mt-5">
                <span class="dot">
                  <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                    <defs></defs>
                    <circle cx="250" cy="250" r="250" fill="#0063af"></circle>
                  </svg>
                </span>
                <span tal:replace="context/description"/>
              </p>

              <div class="mb-4" tal:condition="context/text" tal:content="structure context/text/output"/>

              <h2 tal:condition="python: context.verweis or context.link">Weitere Informationen</h2>

              <section class="mb-4">

                <p tal:condition="context/verweis">
                  <a tal:attributes="href python:context.verweis.to_object.absolute_url()"
                     tal:content="python:context.verweis.to_object.title"></a>
                </p>

                <p tal:condition="context/link">
                  <a target="_blank" href="${context/link}">${context/link}</a>
                </p>

                <div class="mt-4 mb-4 d-grid gap-2 text-center shadow p-3 text-success" tal:condition="python: context.anmeldung=='keine'">
                  <strong>Für eine Teilnahme ist keine Anmeldung erforderlich</strong>
                </div>

                <div class="d-grid gap-2 text-center shadow p-3" tal:condition="python: context.anmeldung=='email'">
                  <strong>Anmeldung per E-Mail</strong>
                  <a class="btn btn-primary" role="button" 
                     href="mailto:${context/email}?subject=Anmeldung: ${context/title}">Anmelden</a>
                </div>

                <div class="d-grid gap-2 text-center shadow p-3" tal:condition="python: context.anmeldung=='telefon'">
                  <strong>Anmeldung per Telefon</strong>
                  <p class="h4"><tal:icon tal:replace="structure python:icons.tag('telephone', tag_class='me-1')" />${context/telefon}</p>
                </div>

                <div class="d-grid gap-2 text-center shadow p-3" tal:condition="python: context.anmeldung=='link'">
                  <strong>Anmeldung per Online-Formular</strong>
                  <a tal:condition="context/formular" class="btn btn-primary" role="button"
                     tal:attributes="href python: context.formular.to_object.absolute_url()">
                     Anmelden</a>
                </div>

              </section>

              <h2>Terminübersicht</h2>

              <ul tal:define="list_of_dates view/list_of_dates" class="list-group list-group-flush">
                <li tal:repeat="date list_of_dates" 
                    class="list-group-item d-flex justify-content-between align-items-start">
                  <div class="ms-2 me-auto">
                    <div class="fw-bold">${date/ort}</div>
                      <span><tal:icon tal:replace="structure python:icons.tag('plone-calendar', tag_class='me-1')" />
                        ${date/zeit/day}</span>
                      <span class="p-4"><tal:icon tal:replace="structure python:icons.tag('plone-clock', tag_class='me-1')" />
                        ${date/zeit/time}</span>
                  </div>
                  <span class="badge text-bg-${date/places/class} text-white rounded-pill">${date/places/number}</span>
                </li>
              </ul>
          
              <div class="mt-4" tal:condition="context/endtext" tal:content="structure context/endtext/output"/>

            </div>

            <div class="col-12 col-sm-3">

              <div class="card card-shadow mb-3">
                <div class="card-header">
                  Ansprechpartner:in
                </div>
                <div class="card-body">
                  <p class="card-text"><strong>${context/kontakt}</strong></p>
                  <ul>
                    <li tal:condition="context/email" class="list-group-item">
                      <tal:icon tal:replace="structure python:icons.tag('envelope', tag_class='me-1')" />
                      <a href="mailto:${context/email}" class="card-link" style="font-size: 14pt;">${context/email}</a>
                    </li>
                    <li tal:condition="context/telefon" class="list-group-item">
                      <tal:icon tal:replace="structure python:icons.tag('telephone', tag_class='me-1')" />
                      <a href="tel:${context/telefon}" class="card-link" style="font-size: 14pt;">${context/telefon}</a>
                    </li>
                </div><!--card-body-->
              </div><!--card-->

              <div tal:replace="structure context/@@portlet-cards-view"/>

            </div><!--col-->
          
          </div><!--row-->

        </div><!--container-->

      </tal:variables>
    </tal:main-macro>  
  </metal:main>
</body>
</html>
